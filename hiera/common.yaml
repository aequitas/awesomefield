classes:
  - base
  - awesome
  - awesome::motd
  - awesome::multisite
  - awesome::pam_ssh_agent_auth


# letsencrypt
letsencrypt::email: awesomeretro@ijohan.nl
letsencrypt::agree_tos: true
# letsencrypt::nginx_vhosts:
#   lists.awesomeretro.org:
#     plugin: webroot
#     webroot_paths:
#         - /var/www/lists.awesomeretro.org
#     manage_cron: true

# basic firewall config


firewall:
  100 allow related, established:
    proto: all
    state:
      - RELATED
      - ESTABLISHED
    action: accept
  100 allow icmp:
    proto: icmp
    action: accept
  100 allow local:
    proto: all
    iniface: lo
    action: accept
  200 allow ssh:
    dport: ssh
    action: accept
  300 allow http traffic in:
    dport: http
    action: accept
  300 allow https traffic in:
    dport: https
    action: accept
  300 allow mail from diggie:
    dport: 25
    source: 217.198.23.134/32
    action: accept
  999 drop the rest:
    action: drop

# ssh server configuration
# https://forge.puppetlabs.com/saz/ssh#hiera-example
ssh::storeconfigs_enabled: false
ssh::server_options:
  PasswordAuthentication: 'no'
